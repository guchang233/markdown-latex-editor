import"./codemirror-5cccf372.js";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t){for(const e of n)e(void 0);return e}const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const l="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function a(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function h(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function p(e){return document.createTextNode(e)}function g(){return p(" ")}function m(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function f(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t,n){e.classList.toggle(t,!!n)}let b;function x(e){b=e}function k(){if(!b)throw new Error("Function called outside component initialization");return b}function y(e){k().$$.on_mount.push(e)}function $(){const e=k();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}(t,n,{cancelable:o});return r.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}const S=[],j=[];let C=[];const E=[],L=Promise.resolve();let M=!1;function T(e){C.push(e)}const _=new Set;let B=0;function I(){if(0!==B)return;const e=b;do{try{for(;B<S.length;){const e=S[B];B++,x(e),H(e.$$)}}catch(t){throw S.length=0,B=0,t}for(x(null),S.length=0,B=0;j.length;)j.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];_.has(t)||(_.add(t),t())}C.length=0}while(S.length);for(;E.length;)E.pop()();M=!1,_.clear(),x(e)}function H(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const z=new Set;let D;function O(e,t){e&&e.i&&(z.delete(e),e.i(t))}function N(e,t,n,o){if(e&&e.o){if(z.has(e))return;z.add(e),D.c.push((()=>{z.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function A(e){return void 0!==e?.length?e:Array.from(e)}function P(e){e&&e.c()}function X(e,n,s){const{fragment:i,after_update:l}=e.$$;i&&i.m(n,s),T((()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),l.forEach(T)}function R(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];C.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),C=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function F(e,t){-1===e.$$.dirty[0]&&(S.push(e),M||(M=!0,L.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,r,s,i,l,a,c=null,u=[-1]){const h=b;x(t);const p=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(h?h.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||h.$$.root};c&&c(p.root);let g=!1;if(p.ctx=s?s(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),g&&F(t,e)),n})):[],p.update(),g=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(d)}else p.fragment&&p.fragment.c();r.intro&&O(t.$$.fragment),X(t,r.target,r.anchor),I()}x(h)}class V{$$=void 0;$$set=void 0;$destroy(){R(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const q=[];function K(t,n=e){let o;const r=new Set;function i(e){if(s(t,e)&&(t=e,o)){const e=!q.length;for(const n of r)n[1](),q.push(n,t);if(e){for(let e=0;e<q.length;e+=2)q[e][0](q[e+1]);q.length=0}}}function l(e){i(e(t))}return{set:i,update:l,subscribe:function(s,a=e){const c=[s,a];return r.add(c),1===r.size&&(o=n(i,l)||e),s(t),()=>{r.delete(c),0===r.size&&o&&(o(),o=null)}}}}const U=(()=>{const{subscribe:e,update:t,set:n}=K({theme:"light"});return{subscribe:e,setTheme:e=>{try{localStorage.setItem("marktex-theme",e)}catch(t){console.warn("Failed to save theme preference to localStorage:",t)}n({theme:e})},toggleTheme:()=>{t((e=>{const t="light"===e.theme?"dark":"light";try{localStorage.setItem("marktex-theme",t)}catch(n){console.warn("Failed to save theme preference to localStorage:",n)}return{theme:t}}))},initialize:()=>{try{const e=localStorage.getItem("marktex-theme");e&&n({theme:e})}catch(e){console.warn("Failed to load theme preference from localStorage:",e)}}}})();let J,Y;const G=new WeakMap,Q=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap;let ne={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Q.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Z.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return se(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ie(this),t),se(G.get(this))}:function(...t){return se(e.apply(ie(this),t))}:function(t,...n){const o=e.call(ie(this),t,...n);return Z.set(o,t.sort?t.sort():[t]),se(o)}}function re(e){return"function"==typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(Q.has(e))return;const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),o()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));Q.set(e,t)}(e),t=e,(J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ne):e);var t}function se(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(se(e.result)),o()},s=()=>{n(e.error),o()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&G.set(t,e)})).catch((()=>{})),te.set(t,e),t}(e);if(ee.has(e))return ee.get(e);const t=re(e);return t!==e&&(ee.set(e,t),te.set(t,e)),t}const ie=e=>te.get(e);const le=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],ce=new Map;function de(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ce.get(t))return ce.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,r=ae.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!r&&!le.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let i=s.store;return o&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),r&&s.done]))[0]};return ce.set(t,s),s}ne=(e=>({...e,get:(t,n,o)=>de(t,n)||e.get(t,n,o),has:(t,n)=>!!de(t,n)||e.has(t,n)}))(ne);const ue=(async()=>function(e,t,{blocked:n,upgrade:o,blocking:r,terminated:s}={}){const i=indexedDB.open(e,t),l=se(i);return o&&i.addEventListener("upgradeneeded",(e=>{o(se(i.result),e.oldVersion,e.newVersion,se(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),l.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),l}("marktex-editor",1,{upgrade(e){e.createObjectStore("documents",{keyPath:"id"}).createIndex("timestamp","timestamp"),e.createObjectStore("versions",{keyPath:"id",autoIncrement:!0})}}))(),he=(()=>{const e={currentContent:'# Welcome to MarkTeX Editor\n\nThis is a **high-performance** Markdown and LaTeX editor.\n\n## Features\n\n- Real-time preview\n- Markdown syntax highlighting\n- LaTeX math rendering: $E = mc^2$\n- Code highlighting\n\n```javascript\nconsole.log("Hello, world!");\n```\n\n## Math Example\n\n$$\n\\int_{a}^{b} f(x) \\, dx = F(b) - F(a)\n$$\n\n## Table Example\n\n| Header 1 | Header 2 | Header 3 |\n|----------|----------|----------|\n| Cell 1   | Cell 2   | Cell 3   |\n| Cell 4   | Cell 5   | Cell 6   |\n\n## Task List\n\n- [x] Create editor\n- [ ] Add more features\n- [ ] Release to the world\n',isSaving:!1,lastSaved:null,versions:[]},{subscribe:t,update:n,set:o}=K(e),r=((e,t=500)=>{let n;return function(...o){clearTimeout(n),n=setTimeout((()=>e.apply(this,o)),t)}})((async e=>{n((e=>({...e,isSaving:!0})));try{const t=Date.now(),o=await ue,r=o.transaction("documents","readwrite").objectStore("documents");await r.put({id:"current",content:e,timestamp:t});const s=o.transaction("versions","readwrite").objectStore("versions");await s.add({content:e,timestamp:t});const i=await s.getAll();if(i.length>10){const e=i.sort(((e,t)=>t.timestamp-e.timestamp)),t=e.slice(10).map((e=>s.delete(e.id)));await Promise.all(t)}const l=(await s.getAll()).sort(((e,t)=>t.timestamp-e.timestamp)).slice(0,10);n((e=>({...e,isSaving:!1,lastSaved:t,versions:l})))}catch(t){console.error("Failed to save document:",t),n((e=>({...e,isSaving:!1})))}}));return{subscribe:t,updateContent:e=>{n((t=>({...t,currentContent:e}))),r(e)},loadDocument:async()=>{try{const t=await ue,r=t.transaction("documents","readonly").objectStore("documents"),s=await r.get("current");s&&o({...e,currentContent:s.content,lastSaved:s.timestamp});const i=t.transaction("versions","readonly").objectStore("versions"),l=(await i.getAll()).sort(((e,t)=>t.timestamp-e.timestamp)).slice(0,10);n((e=>({...e,versions:l})))}catch(t){console.error("Failed to load document:",t)}},restoreVersion:async e=>{try{const t=await ue,o=t.transaction("versions","readonly").objectStore("versions"),s=await o.get(e);s&&(n((e=>({...e,currentContent:s.content}))),r(s.content))}catch(t){console.error("Failed to restore version:",t)}},exportDocument:()=>new Promise(((e,t)=>{n((t=>(e(t.currentContent),t)))}))}})(),pe={fontSize:14,lineHeight:1.6,tabSize:2,showLineNumbers:!0,autoSave:!0,autoSaveInterval:30,syncScroll:!0,livePreview:!0,showCodeBackground:!0,showMathBackground:!1,shortcutsEnabled:!0};const ge=K(function(){try{const e=localStorage.getItem("marktex-settings");if(e)return{...pe,...JSON.parse(e)}}catch(e){console.error("无法加载设置:",e)}return pe}());function me(e,t){ge.update((n=>({...n,[e]:t})))}ge.subscribe((e=>{try{localStorage.setItem("marktex-settings",JSON.stringify(e))}catch(t){console.error("无法保存设置:",t)}}));function fe(e,t,n){const o=e.slice();return o[5]=t[n],o}function ve(e){let t;return{c(){t=u("div"),t.innerHTML='<div class="w-3 h-3 rounded-full bg-green-500"></div> <span>编辑器就绪</span>',f(t,"class","editor-ready-indicator toolbar-status py-1 px-3 text-sm flex items-center gap-1 mr-2 svelte-t69619")},m(e,n){c(e,t,n)},d(e){e&&d(t)}}}function we(e){let t;return{c(){t=u("div"),t.innerHTML='<div class="w-3 h-3 rounded-full bg-red-500 animate-pulse svelte-t69619"></div> <span>编辑器加载中...</span>',f(t,"class","editor-loading-indicator toolbar-status py-1 px-3 text-sm flex items-center gap-1 mr-2 svelte-t69619")},m(e,n){c(e,t,n)},d(e){e&&d(t)}}}function be(e){let t,n,o,r,s,i,l,h=function(e){switch(e){case"bold":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path></svg>';case"italic":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line></svg>';case"strikethrough":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.3 5H6.7a2.7 2.7 0 0 0-2.7 2.7v8.6a2.7 2.7 0 0 0 2.7 2.7h10.6a2.7 2.7 0 0 0 2.7-2.7V7.7A2.7 2.7 0 0 0 17.3 5z"/><line x1="4" y1="12" x2="20" y2="12"/></svg>';case"code":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>';case"link":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>';case"image":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>';case"table":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3h18v18H3zM3 9h18M3 15h18M9 3v18M15 3v18"></path></svg>';case"function":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 9h14M5 15h14M9 5v14M15 5v14"/></svg>';case"list":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>';case"list-ordered":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="10" y1="6" x2="21" y2="6"></line><line x1="10" y1="12" x2="21" y2="12"></line><line x1="10" y1="18" x2="21" y2="18"></line><path d="M4 6h1v4"></path><path d="M4 10h2"></path><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"></path></svg>';case"check-square":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>';case"heading":return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 12h12"></path><path d="M6 20V4"></path><path d="M18 20V4"></path></svg>';default:return'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle></svg>'}}(e[5].icon)+"";function p(){return e[3](e[5])}return{c(){t=u("button"),n=u("span"),o=g(),f(n,"class","flex items-center justify-center w-5 h-5"),f(n,"aria-hidden","true"),f(t,"type","button"),f(t,"class","toolbar-button p-2 hover:bg-base-300 dark:hover:bg-base-300-dark rounded-md transition-colors duration-150 svelte-t69619"),f(t,"title",r=e[0]?e[5].tooltip:"编辑器加载中..."),t.disabled=s=!e[0],w(t,"disabled",!e[0])},m(e,r){c(e,t,r),a(t,n),n.innerHTML=h,a(t,o),i||(l=m(t,"click",p),i=!0)},p(n,o){e=n,1&o&&r!==(r=e[0]?e[5].tooltip:"编辑器加载中...")&&f(t,"title",r),1&o&&s!==(s=!e[0])&&(t.disabled=s),1&o&&w(t,"disabled",!e[0])},d(e){e&&d(t),i=!1,l()}}}function xe(t){let n,o;function r(e,t){return e[0]?ve:we}let s=r(t),i=s(t),l=A(t[1]),h=[];for(let e=0;e<l.length;e+=1)h[e]=be(fe(t,l,e));return{c(){n=u("div"),i.c(),o=g();for(let e=0;e<h.length;e+=1)h[e].c();f(n,"class","flex items-center gap-2 p-2 bg-base-200 dark:bg-base-200-dark rounded-lg shadow-sm overflow-x-auto")},m(e,t){c(e,n,t),i.m(n,null),a(n,o);for(let o=0;o<h.length;o+=1)h[o]&&h[o].m(n,null)},p(e,[t]){if(s!==(s=r(e))&&(i.d(1),i=s(e),i&&(i.c(),i.m(n,o))),7&t){let o;for(l=A(e[1]),o=0;o<l.length;o+=1){const r=fe(e,l,o);h[o]?h[o].p(r,t):(h[o]=be(r),h[o].c(),h[o].m(n,null))}for(;o<h.length;o+=1)h[o].d(1);h.length=l.length}},i:e,o:e,d(e){e&&d(n),i.d(),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(h,e)}}}function ke(e,t,n){let{editorReady:o=!1}=t;const r=$();y((()=>{console.log("[MarkdownToolbar] 组件挂载完成, editorReady =",o)}));function s(e,t){if(o)console.log("[MarkdownToolbar] 按钮点击:",e),r("action",{action:e,placeholder:t});else{console.log("[MarkdownToolbar] 编辑器未就绪，忽略操作:",e);!function(e,t,n="info"){const o=document.createElement("div"),r="warning"===n?"bg-yellow-100 dark:bg-yellow-900":"error"===n?"bg-red-100 dark:bg-red-900":"bg-blue-100 dark:bg-blue-900",s="warning"===n?"text-yellow-800 dark:text-yellow-200":"error"===n?"text-red-800 dark:text-red-200":"text-blue-800 dark:text-blue-200";o.className=`${r} ${s} px-4 py-2 rounded-lg shadow-md text-sm max-w-xs animate-fade-in`,o.innerHTML=t,e.appendChild(o),setTimeout((()=>{o.classList.add("animate-fade-out"),setTimeout((()=>o.remove()),300)}),3e3)}(document.querySelector(".notification-container")||function(){const e=document.createElement("div");return e.className="notification-container fixed top-4 right-4 z-50 flex flex-col gap-2",document.body.appendChild(e),e}(),"编辑器尚未完全加载，请稍候再试","warning")}}return e.$$set=e=>{"editorReady"in e&&n(0,o=e.editorReady)},e.$$.update=()=>{1&e.$$.dirty&&console.log("[MarkdownToolbar] editorReady changed to:",o)},[o,[{id:"bold",tooltip:"Bold (Ctrl+B)",placeholder:"**Bold**",icon:"bold"},{id:"italic",tooltip:"Italic (Ctrl+I)",placeholder:"*Italic*",icon:"italic"},{id:"strikethrough",tooltip:"Strikethrough",placeholder:"~~Strikethrough~~",icon:"strikethrough"},{id:"code",tooltip:"Code (Ctrl+K)",placeholder:"`Code`",icon:"code"},{id:"link",tooltip:"Link",placeholder:"[Link](https://example.com)",icon:"link"},{id:"image",tooltip:"Image",placeholder:"![Alt text](https://example.com/image.jpg)",icon:"image"},{id:"table",tooltip:"Table",placeholder:"| Header | Header |\n| ------ | ------ |\n| Cell   | Cell   |",icon:"table"},{id:"formula",tooltip:"Math Formula",placeholder:"$E = mc^2$",icon:"function"},{id:"bulletList",tooltip:"Bulleted List",placeholder:"- List item\n- Another item",icon:"list"},{id:"numberedList",tooltip:"Numbered List",placeholder:"1. First item\n2. Second item",icon:"list-ordered"},{id:"taskList",tooltip:"Task List",placeholder:"- [ ] Todo item\n- [x] Completed item",icon:"check-square"},{id:"heading",tooltip:"Heading",placeholder:"## Heading",icon:"heading"}],s,e=>s(e.id,e.placeholder)]}class ye extends V{constructor(e){super(),W(this,e,ke,xe,s,{editorReady:0})}}function $e(e){try{console.log("开始渲染Markdown，长度:",e.length);const n={};let o=0,r=e.replace(/\$\$([\s\S]*?)\$\$/g,((e,t)=>{const r=`__LATEX_BLOCK_${o++}__`;return n[r]=e,r}));r=r.replace(/\$([^\$\n]+?)\$/g,((e,t)=>{const r=`__LATEX_INLINE_${o++}__`;return n[r]=e,r})),console.log("处理Markdown文本，长度:",r.length);let s=function(e){e=function(e){const t=e.split("\n");let n=!1,o=[],r=[];console.log("原始文本行数:",t.length);for(let s=0;s<t.length;s++){const e=t[s],i=e.trim();if(i.includes("|")&&(i.startsWith("|")||i.endsWith("|"))&&i.split("|").length>=3)n?o.push(e):s+1<t.length&&t[s+1].includes("|")&&t[s+1].includes("-")?(n=!0,o=[e],console.log("检测到表格开始:",e)):r.push(e);else{if(n){const e=Se(o);r.push(e),console.log("表格行数:",o.length,"转换后:",e),n=!1,o=[]}r.push(e)}}if(n&&o.length>0){const e=Se(o);r.push(e),console.log("文末表格行数:",o.length,"转换后:",e)}return r.join("\n")}(e),e=e.replace(/```([^`]*?)```/gs,((e,t)=>`<pre><code>${t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`));let t=e.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>");return t=t.replace(/\*\*(.*?)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*?)\*/gim,"<em>$1</em>").replace(/~~(.*?)~~/gim,"<del>$1</del>").replace(/`([^`]+)`/gim,"<code>$1</code>"),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2">$1</a>'),t=t.replace(/!\[([^\]]+)\]\(([^)]+)\)/gim,'<img src="$2" alt="$1">'),t=t.replace(/^\s*\*\s(.*$)/gim,"<li>$1</li>").replace(/^\s*-\s(.*$)/gim,"<li>$1</li>").replace(/^\s*\d+\.\s(.*$)/gim,"<li>$1</li>"),t=t.replace(/<li>(.+)<\/li>\n<li>/gim,"<li>$1</li>\n<li>").replace(/(<li>(.+)<\/li>\n)+/gim,"<ul>$&</ul>"),t=t.replace(/<li>\[\s\] (.*?)<\/li>/gim,'<li class="task-list-item"><input type="checkbox" disabled> $1</li>').replace(/<li>\[x\] (.*?)<\/li>/gim,'<li class="task-list-item"><input type="checkbox" checked disabled> $1</li>'),t=t.replace(/\n/gim,"<br>"),t}(r);if(console.log("Markdown处理完成，HTML长度:",s.length),"undefined"!=typeof window&&window.katex){const e=window.katex;for(let r=0;r<o;r++){const o=`__LATEX_BLOCK_${r}__`,i=`__LATEX_INLINE_${r}__`;if(s.includes(o)){const r=n[o],i=r.replace(/^\$\$([\s\S]*?)\$\$$/g,"$1");try{const t=e.renderToString(i,{throwOnError:!1,displayMode:!0});s=s.replace(o,t)}catch(t){console.error("块级LaTeX渲染错误:",t),s=s.replace(o,`<div class="latex-error" title="${t instanceof Error?t.message:"Unknown error"}">${r}</div>`)}}if(s.includes(i)){const o=n[i],r=o.replace(/^\$([^\$]+)\$$/g,"$1");try{const t=e.renderToString(r,{throwOnError:!1,displayMode:!1});s=s.replace(i,t)}catch(t){console.error("内联LaTeX渲染错误:",t),s=s.replace(i,`<span class="latex-error" title="${t instanceof Error?t.message:"Unknown error"}">${o}</span>`)}}}}else{for(const[e,t]of Object.entries(n))e.startsWith("__LATEX_BLOCK_")?s=s.replace(e,`<div class="math-block">${t.replace(/^\$\$([\s\S]*?)\$\$$/g,"$1")}</div>`):e.startsWith("__LATEX_INLINE_")&&(s=s.replace(e,`<span class="math-inline">${t.replace(/^\$([^\$]+)\$$/g,"$1")}</span>`));console.warn("KaTeX库不可用，使用备用渲染方式。请确保已加载KaTeX。")}const i=s.substring(0,200)+(s.length>200?"...":"");return console.log("渲染结果预览:",i),s}catch(t){return console.error("Markdown渲染错误:",t),`<div class="error">Error rendering markdown: ${t instanceof Error?t.message:"Unknown error"}</div>`}}function Se(e){if(e.length<2)return e.join("\n");console.log("转换表格, 行数:",e.length);const t=e[0];e[1];const n=e.slice(2);function o(e){let t=e.trim();return t.startsWith("|")&&(t=t.substring(1)),t.endsWith("|")&&(t=t.substring(0,t.length-1)),t.split("|").map((e=>e.trim()))}const r=o(t);let s='<table class="md-table"><thead><tr>';for(const i of r)s+=`<th>${i}</th>`;s+="</tr></thead><tbody>";for(const i of n){const e=o(i);if(e.length>0){s+="<tr>";for(const t of e)s+=`<td>${t}</td>`;s+="</tr>"}}return s+="</tbody></table>",console.log("生成HTML表格:",s.substring(0,100)+"..."),s}function je(e){let t,n,r,s,i,l,h,p,v,b,x,k,y,$,S,j,C,E,L,M,T,_,B,I,H;function z(e,t){return"appearance"===e[1]?Me:"editor"===e[1]?Le:"autosave"===e[1]?Ee:"preview"===e[1]?Ce:void 0}let D=z(e),O=D&&D(e);return{c(){t=u("div"),n=g(),r=u("div"),s=u("header"),i=u("h2"),i.textContent="编辑器设置",l=g(),h=u("button"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',p=g(),v=u("div"),b=u("button"),b.textContent="外观",x=g(),k=u("button"),k.textContent="编辑器",y=g(),$=u("button"),$.textContent="自动保存",S=g(),j=u("button"),j.textContent="预览",C=g(),E=u("div"),O&&O.c(),L=g(),M=u("div"),T=u("button"),T.textContent="重置为默认值",_=g(),B=u("button"),B.textContent="完成",f(t,"class","settings-dialog-overlay svelte-n6orji"),f(i,"class","svelte-n6orji"),f(h,"class","close-button svelte-n6orji"),f(h,"aria-label","关闭设置"),f(s,"class","settings-dialog-header svelte-n6orji"),f(b,"class","tab svelte-n6orji"),w(b,"active","appearance"===e[1]),f(k,"class","tab svelte-n6orji"),w(k,"active","editor"===e[1]),f($,"class","tab svelte-n6orji"),w($,"active","autosave"===e[1]),f(j,"class","tab svelte-n6orji"),w(j,"active","preview"===e[1]),f(v,"class","tabs svelte-n6orji"),f(E,"class","settings-content svelte-n6orji"),f(T,"class","reset-button svelte-n6orji"),f(B,"class","done-button svelte-n6orji"),f(M,"class","settings-actions svelte-n6orji"),f(r,"class","settings-dialog svelte-n6orji")},m(o,d){c(o,t,d),c(o,n,d),c(o,r,d),a(r,s),a(s,i),a(s,l),a(s,h),a(r,p),a(r,v),a(v,b),a(v,x),a(v,k),a(v,y),a(v,$),a(v,S),a(v,j),a(r,C),a(r,E),O&&O.m(E,null),a(r,L),a(r,M),a(M,T),a(M,_),a(M,B),I||(H=[m(t,"click",e[3]),m(h,"click",e[3]),m(b,"click",e[8]),m(k,"click",e[9]),m($,"click",e[10]),m(j,"click",e[11]),m(T,"click",e[6]),m(B,"click",e[3])],I=!0)},p(e,t){2&t&&w(b,"active","appearance"===e[1]),2&t&&w(k,"active","editor"===e[1]),2&t&&w($,"active","autosave"===e[1]),2&t&&w(j,"active","preview"===e[1]),D===(D=z(e))&&O?O.p(e,t):(O&&O.d(1),O=D&&D(e),O&&(O.c(),O.m(E,null)))},d(e){e&&(d(t),d(n),d(r)),O&&O.d(),I=!1,o(H)}}}function Ce(e){let t,n,r,s,i,l,h,p,v,w,b,x,k,y,$,S,j,C,E,L,M,T,_,B,I,H,z,D,O,N,A,P;return{c(){t=u("section"),n=u("h3"),n.textContent="预览设置",r=g(),s=u("div"),i=u("label"),l=u("input"),p=g(),v=u("span"),v.textContent="同步滚动",w=g(),b=u("div"),x=u("label"),k=u("input"),$=g(),S=u("span"),S.textContent="实时预览",j=g(),C=u("div"),E=u("label"),L=u("input"),T=g(),_=u("span"),_.textContent="显示代码块背景",B=g(),I=u("div"),H=u("label"),z=u("input"),O=g(),N=u("span"),N.textContent="显示公式块背景",f(n,"class","svelte-n6orji"),f(l,"type","checkbox"),f(l,"id","syncScroll"),l.checked=h=e[2].syncScroll,f(l,"class","svelte-n6orji"),f(i,"for","syncScroll"),f(i,"class","svelte-n6orji"),f(s,"class","setting-item checkbox svelte-n6orji"),f(k,"type","checkbox"),f(k,"id","livePreview"),k.checked=y=e[2].livePreview,f(k,"class","svelte-n6orji"),f(x,"for","livePreview"),f(x,"class","svelte-n6orji"),f(b,"class","setting-item checkbox svelte-n6orji"),f(L,"type","checkbox"),f(L,"id","showCodeBackground"),L.checked=M=e[2].showCodeBackground,f(L,"class","svelte-n6orji"),f(E,"for","showCodeBackground"),f(E,"class","svelte-n6orji"),f(C,"class","setting-item checkbox svelte-n6orji"),f(z,"type","checkbox"),f(z,"id","showMathBackground"),z.checked=D=e[2].showMathBackground,f(z,"class","svelte-n6orji"),f(H,"for","showMathBackground"),f(H,"class","svelte-n6orji"),f(I,"class","setting-item checkbox svelte-n6orji"),f(t,"class","settings-section svelte-n6orji")},m(o,d){c(o,t,d),a(t,n),a(t,r),a(t,s),a(s,i),a(i,l),a(i,p),a(i,v),a(t,w),a(t,b),a(b,x),a(x,k),a(x,$),a(x,S),a(t,j),a(t,C),a(C,E),a(E,L),a(E,T),a(E,_),a(t,B),a(t,I),a(I,H),a(H,z),a(H,O),a(H,N),A||(P=[m(l,"change",e[19]),m(k,"change",e[20]),m(L,"change",e[21]),m(z,"change",e[22])],A=!0)},p(e,t){4&t&&h!==(h=e[2].syncScroll)&&(l.checked=h),4&t&&y!==(y=e[2].livePreview)&&(k.checked=y),4&t&&M!==(M=e[2].showCodeBackground)&&(L.checked=M),4&t&&D!==(D=e[2].showMathBackground)&&(z.checked=D)},d(e){e&&d(t),A=!1,o(P)}}}function Ee(e){let t,n,r,s,i,l,h,w,b,x,k,y,$,S,j,C,E,L,M,T,_,B,I,H=e[2].autoSaveInterval+"";return{c(){t=u("section"),n=u("h3"),n.textContent="自动保存设置",r=g(),s=u("div"),i=u("label"),l=u("input"),w=g(),b=u("span"),b.textContent="启用自动保存",x=g(),k=u("div"),y=u("label"),y.textContent="自动保存间隔（秒）",$=g(),S=u("div"),j=u("input"),L=g(),M=u("span"),T=p(H),_=p(" 秒"),f(n,"class","svelte-n6orji"),f(l,"type","checkbox"),f(l,"id","autoSave"),l.checked=h=e[2].autoSave,f(l,"class","svelte-n6orji"),f(i,"for","autoSave"),f(i,"class","svelte-n6orji"),f(s,"class","setting-item checkbox svelte-n6orji"),f(y,"for","autoSaveInterval"),f(y,"class","svelte-n6orji"),f(j,"type","range"),f(j,"id","autoSaveInterval"),f(j,"min","5"),f(j,"max","300"),f(j,"step","5"),j.value=C=e[2].autoSaveInterval,j.disabled=E=!e[2].autoSave,f(j,"class","svelte-n6orji"),f(M,"class","value-display svelte-n6orji"),f(S,"class","setting-control svelte-n6orji"),f(k,"class","setting-item svelte-n6orji"),f(t,"class","settings-section svelte-n6orji")},m(o,d){c(o,t,d),a(t,n),a(t,r),a(t,s),a(s,i),a(i,l),a(i,w),a(i,b),a(t,x),a(t,k),a(k,y),a(k,$),a(k,S),a(S,j),a(S,L),a(S,M),a(M,T),a(M,_),B||(I=[m(l,"change",e[17]),m(j,"input",e[18])],B=!0)},p(e,t){4&t&&h!==(h=e[2].autoSave)&&(l.checked=h),4&t&&C!==(C=e[2].autoSaveInterval)&&(j.value=C),4&t&&E!==(E=!e[2].autoSave)&&(j.disabled=E),4&t&&H!==(H=e[2].autoSaveInterval+"")&&v(T,H)},d(e){e&&d(t),B=!1,o(I)}}}function Le(e){let t,n,r,s,i,l,h,w,b,x,k,y,$,S,j,C,E,L,M,T,_,B,I=e[2].tabSize+"";return{c(){t=u("section"),n=u("h3"),n.textContent="编辑器设置",r=g(),s=u("div"),i=u("label"),i.textContent="制表符大小",l=g(),h=u("div"),w=u("input"),x=g(),k=u("span"),y=p(I),$=p(" 个空格"),S=g(),j=u("div"),C=u("label"),E=u("input"),M=g(),T=u("span"),T.textContent="启用快捷键",f(n,"class","svelte-n6orji"),f(i,"for","tabSize"),f(i,"class","svelte-n6orji"),f(w,"type","range"),f(w,"id","tabSize"),f(w,"min","2"),f(w,"max","8"),f(w,"step","2"),w.value=b=e[2].tabSize,f(w,"class","svelte-n6orji"),f(k,"class","value-display svelte-n6orji"),f(h,"class","setting-control svelte-n6orji"),f(s,"class","setting-item svelte-n6orji"),f(E,"type","checkbox"),f(E,"id","shortcutsEnabled"),E.checked=L=e[2].shortcutsEnabled,f(E,"class","svelte-n6orji"),f(C,"for","shortcutsEnabled"),f(C,"class","svelte-n6orji"),f(j,"class","setting-item checkbox svelte-n6orji"),f(t,"class","settings-section svelte-n6orji")},m(o,d){c(o,t,d),a(t,n),a(t,r),a(t,s),a(s,i),a(s,l),a(s,h),a(h,w),a(h,x),a(h,k),a(k,y),a(k,$),a(t,S),a(t,j),a(j,C),a(C,E),a(C,M),a(C,T),_||(B=[m(w,"input",e[15]),m(E,"change",e[16])],_=!0)},p(e,t){4&t&&b!==(b=e[2].tabSize)&&(w.value=b),4&t&&I!==(I=e[2].tabSize+"")&&v(y,I),4&t&&L!==(L=e[2].shortcutsEnabled)&&(E.checked=L)},d(e){e&&d(t),_=!1,o(B)}}}function Me(e){let t,n,r,s,i,l,h,w,b,x,k,y,$,S,j,C,E,L,M,T,_,B,I,H,z,D,O,N,A,P,X,R,F=e[2].fontSize+"",W=e[2].lineHeight+"";return{c(){t=u("section"),n=u("h3"),n.textContent="外观设置",r=g(),s=u("div"),i=u("label"),i.textContent="字体大小",l=g(),h=u("div"),w=u("input"),x=g(),k=u("span"),y=p(F),$=p("px"),S=g(),j=u("div"),C=u("label"),C.textContent="行高",E=g(),L=u("div"),M=u("input"),_=g(),B=u("span"),I=p(W),H=g(),z=u("div"),D=u("label"),O=u("input"),A=g(),P=u("span"),P.textContent="显示行号",f(n,"class","svelte-n6orji"),f(i,"for","fontSize"),f(i,"class","svelte-n6orji"),f(w,"type","range"),f(w,"id","fontSize"),f(w,"min","10"),f(w,"max","24"),f(w,"step","1"),w.value=b=e[2].fontSize,f(w,"class","svelte-n6orji"),f(k,"class","value-display svelte-n6orji"),f(h,"class","setting-control svelte-n6orji"),f(s,"class","setting-item svelte-n6orji"),f(C,"for","lineHeight"),f(C,"class","svelte-n6orji"),f(M,"type","range"),f(M,"id","lineHeight"),f(M,"min","1"),f(M,"max","3"),f(M,"step","0.1"),M.value=T=e[2].lineHeight,f(M,"class","svelte-n6orji"),f(B,"class","value-display svelte-n6orji"),f(L,"class","setting-control svelte-n6orji"),f(j,"class","setting-item svelte-n6orji"),f(O,"type","checkbox"),f(O,"id","showLineNumbers"),O.checked=N=e[2].showLineNumbers,f(O,"class","svelte-n6orji"),f(D,"for","showLineNumbers"),f(D,"class","svelte-n6orji"),f(z,"class","setting-item checkbox svelte-n6orji"),f(t,"class","settings-section svelte-n6orji")},m(o,d){c(o,t,d),a(t,n),a(t,r),a(t,s),a(s,i),a(s,l),a(s,h),a(h,w),a(h,x),a(h,k),a(k,y),a(k,$),a(t,S),a(t,j),a(j,C),a(j,E),a(j,L),a(L,M),a(L,_),a(L,B),a(B,I),a(t,H),a(t,z),a(z,D),a(D,O),a(D,A),a(D,P),X||(R=[m(w,"input",e[12]),m(M,"input",e[13]),m(O,"change",e[14])],X=!0)},p(e,t){4&t&&b!==(b=e[2].fontSize)&&(w.value=b),4&t&&F!==(F=e[2].fontSize+"")&&v(y,F),4&t&&T!==(T=e[2].lineHeight)&&(M.value=T),4&t&&W!==(W=e[2].lineHeight+"")&&v(I,W),4&t&&N!==(N=e[2].showLineNumbers)&&(O.checked=N)},d(e){e&&d(t),X=!1,o(R)}}}function Te(t){let n,o=t[0]&&je(t);return{c(){o&&o.c(),n=p("")},m(e,t){o&&o.m(e,t),c(e,n,t)},p(e,[t]){e[0]?o?o.p(e,t):(o=je(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&d(n),o&&o.d(e)}}}function _e(e,t,n){let o;i(e,ge,(e=>n(2,o=e)));let{isOpen:r=!1}=t;function s(e){me(e,!o[e])}function l(e,t){me(e,parseInt(t,10))}let a="appearance";function c(e){n(1,a=e)}return e.$$set=e=>{"isOpen"in e&&n(0,r=e.isOpen)},[r,a,o,function(){n(0,r=!1)},s,l,function(){ge.set({...pe})},c,()=>c("appearance"),()=>c("editor"),()=>c("autosave"),()=>c("preview"),e=>l("fontSize",e.target.value),e=>l("lineHeight",e.target.value),()=>s("showLineNumbers"),e=>l("tabSize",e.target.value),()=>s("shortcutsEnabled"),()=>s("autoSave"),e=>l("autoSaveInterval",e.target.value),()=>s("syncScroll"),()=>s("livePreview"),()=>s("showCodeBackground"),()=>s("showMathBackground")]}class Be extends V{constructor(e){super(),W(this,e,_e,Te,s,{isOpen:0})}}function Ie(e){let t;return{c(){t=u("div"),t.innerHTML='<div class="text-center"><div class="spinner mb-2 svelte-ajpfh0"></div> <p>编辑器加载中...</p></div>',f(t,"class","flex items-center justify-center h-full")},m(e,n){c(e,t,n)},d(e){e&&d(t)}}}function He(e){let t,n,o,r,s,i,l,h,p,v,b,x,k,y,$,S,C;o=new ye({props:{editorReady:e[2]}}),o.$on("action",e[6]);let L=!e[2]&&Ie();function M(t){e[12](t)}let T={};return void 0!==e[5]&&(T.isOpen=e[5]),k=new Be({props:T}),j.push((()=>function(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(k,"isOpen",M))),{c(){t=u("div"),n=u("div"),P(o.$$.fragment),r=g(),s=u("button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',i=g(),l=u("div"),h=u("div"),L&&L.c(),p=g(),v=u("div"),b=u("div"),x=g(),P(k.$$.fragment),f(s,"class","settings-button svelte-ajpfh0"),f(s,"title","打开设置"),f(n,"class","flex justify-between items-center mb-2"),f(h,"class","flex-1 bg-base-100 dark:bg-base-100-dark border border-base-300 dark:border-base-300-dark overflow-auto"),f(b,"class","prose dark:prose-invert max-w-none p-6"),w(b,"hide-code-bg",!e[3].showCodeBackground),w(b,"hide-math-bg",!e[3].showMathBackground),f(v,"class","flex-1 bg-base-100 dark:bg-base-100-dark border-t md:border-t-0 md:border-l border-base-300 dark:border-base-300-dark overflow-auto will-change-transform"),f(l,"class","mt-4 flex flex-col md:flex-row h-[calc(100vh-200px)] overflow-hidden rounded-lg shadow-md"),f(t,"class","w-full flex flex-col")},m(d,u){c(d,t,u),a(t,n),X(o,n,null),a(n,r),a(n,s),a(t,i),a(t,l),a(l,h),L&&L.m(h,null),e[10](h),a(l,p),a(l,v),a(v,b),b.innerHTML=e[4],e[11](v),c(d,x,u),X(k,d,u),$=!0,S||(C=m(s,"click",e[7]),S=!0)},p(e,[t]){const n={};4&t&&(n.editorReady=e[2]),o.$set(n),e[2]?L&&(L.d(1),L=null):L||(L=Ie(),L.c(),L.m(h,null)),(!$||16&t)&&(b.innerHTML=e[4]),(!$||8&t)&&w(b,"hide-code-bg",!e[3].showCodeBackground),(!$||8&t)&&w(b,"hide-math-bg",!e[3].showMathBackground);const r={};var s;!y&&32&t&&(y=!0,r.isOpen=e[5],s=()=>y=!1,E.push(s)),k.$set(r)},i(e){$||(O(o.$$.fragment,e),O(k.$$.fragment,e),$=!0)},o(e){N(o.$$.fragment,e),N(k.$$.fragment,e),$=!1},d(n){n&&(d(t),d(x)),R(o),L&&L.d(),e[10](null),e[11](null),R(k,n),S=!1,C()}}}function ze(e){let t=document.querySelector(".notification-container");t||(t=document.createElement("div"),t.className="notification-container fixed top-4 right-4 z-50 flex flex-col gap-2",document.body.appendChild(t));const n=document.createElement("div");n.className="bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 px-4 py-2 rounded-lg shadow-md text-sm max-w-xs animate-fade-in",n.innerHTML=e,t.appendChild(n),setTimeout((()=>{n.classList.add("animate-fade-out"),setTimeout((()=>n.remove()),300)}),5e3)}function De(e,t,n){let o,r,s,l;i(e,ge,(e=>n(3,o=e))),i(e,he,(e=>n(14,r=e)));let a=null,c="",d=!1,u=!1,h=!1;const p='# 欢迎使用 MarkTeX 编辑器\n\n这是一个**高性能**的 Markdown 和 LaTeX 编辑器。\n\n## 特点\n\n- 实时预览\n- Markdown 语法高亮\n- LaTeX 数学公式渲染: $E = mc^2$\n- 代码高亮\n\n```javascript\nconsole.log("Hello, world!");\n```\n\n## 数学公式示例\n\n$$\n\\int_{a}^{b} f(x) \\, dx = F(b) - F(a)\n$$\n\n## 表格示例\n\n| 表头 1 | 表头 2 | 表头 3 |\n|--------|--------|--------|\n| 单元格 1 | 单元格 2 | 单元格 3 |\n| 单元格 4 | 单元格 5 | 单元格 6 |\n\n## 任务列表\n\n- [x] 创建编辑器\n- [ ] 添加更多功能\n- [ ] 与大家分享\n';async function g(e=0,t=3){console.log(`Starting editor initialization (attempt ${e+1}/${t+1})...`),n(2,h=!1);try{if(!s)return console.error("Editor container not found"),e<t&&(console.log("Container not found, retrying in 200ms..."),setTimeout((()=>g(e+1,t)),200),!1);console.log("Creating textarea editor..."),r.currentContent||he.updateContent(p),n(0,s.innerHTML="",s);const i=document.createElement("textarea");i.value=r.currentContent||p,i.style.width="100%",i.style.height="100%",i.style.padding="16px",i.style.border="none",i.style.resize="none",i.style.fontFamily="monospace",i.style.fontSize=`${o.fontSize||16}px`,i.style.lineHeight=`${o.lineHeight||1.5}`,i.style.outline="none";return document.documentElement.classList.contains("dark")?(i.style.color="var(--color-text-dark, #e0e0e0)",i.style.backgroundColor="var(--color-bg-dark, #1e1e1e)"):(i.style.color="var(--color-text-light, #333333)",i.style.backgroundColor="var(--color-bg-light, #ffffff)"),i.addEventListener("input",(e=>{const t=e.target.value;he.updateContent(t),m(t)})),i.addEventListener("keydown",(e=>{if("Tab"===e.key){e.preventDefault();const t=i.selectionStart,n=i.selectionEnd;i.value=i.value.substring(0,t)+"  "+i.value.substring(n),i.selectionStart=i.selectionEnd=t+2,he.updateContent(i.value),m(i.value)}})),s.appendChild(i),n(8,a={state:{doc:{toString:()=>i.value},selection:{main:{from:()=>i.selectionStart,to:()=>i.selectionEnd}}},dispatch:e=>{if(e.changes){const t=i.value,n=e.changes.from,o=e.changes.to,r=e.changes.insert;i.value=t.substring(0,n)+r+t.substring(o),e.selection&&(i.selectionStart=i.selectionEnd=e.selection.anchor),he.updateContent(i.value),m(i.value)}return!0},focus:()=>i.focus(),destroy:()=>{i.removeEventListener("input",(()=>{})),i.removeEventListener("keydown",(()=>{})),s.contains(i)&&s.removeChild(i)}}),console.log("Textarea editor initialized successfully"),setTimeout((()=>{n(2,h=!0),console.log("Editor ready state set to true")}),100),m(r.currentContent||p),s&&l&&(s.addEventListener("scroll",f),l.addEventListener("scroll",v)),!0}catch(i){return console.error("Failed to initialize editor:",i),e<t?(console.log("Critical error, retrying editor initialization in 500ms..."),setTimeout((()=>g(e+1,t)),500),!1):(s&&n(0,s.innerHTML=`\n          <div class="editor-error p-4">\n            <h3 class="text-red-500 font-bold">编辑器初始化失败</h3>\n            <p class="mb-2">请尝试刷新页面或联系管理员。</p>\n            <pre class="bg-red-100 dark:bg-red-900 p-2 rounded overflow-auto text-sm">${i.message}</pre>\n            <button class="mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600" \n                    onclick="location.reload()">刷新页面</button>\n          </div>\n        `,s),n(2,h=!1),!1)}}const m=e=>{console.log("更新预览，内容长度:",e.length),setTimeout((()=>{try{n(4,c=$e(e)),console.log("预览更新完成，HTML长度:",c.length),c.includes("<table")&&console.log("预览包含表格")}catch(t){console.error("预览渲染错误:",t),n(4,c=`<div class="error">预览渲染错误: ${t}</div>`)}}),200)};function f(){if(d)return;d=!0;const e=s.scrollTop/(s.scrollHeight-s.clientHeight||1);n(1,l.scrollTop=e*(l.scrollHeight-l.clientHeight||1),l),setTimeout((()=>{d=!1}),50)}function v(){if(d)return;d=!0;const e=l.scrollTop/(l.scrollHeight-l.clientHeight||1);n(0,s.scrollTop=e*(s.scrollHeight-s.clientHeight||1),s),setTimeout((()=>{d=!1}),50)}function w(){he.exportDocument().then((e=>{const t=new Blob([e],{type:"text/markdown"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="document.md",o.click(),URL.revokeObjectURL(n)}))}const b=he.subscribe((e=>{a&&e.currentContent!==a.state.doc.toString()&&a.dispatch({changes:{from:0,to:a.state.doc.length,insert:e.currentContent}})}));let x;var $;return y((async()=>{console.log("Editor component mounted"),n(2,h=!1);try{console.log("Loading document...");try{await he.loadDocument(),console.log("Document loaded successfully")}catch(e){console.error("Error loading document:",e),he.updateContent(p)}console.log("Waiting for DOM elements to be ready...");const t=()=>!("complete"!==document.readyState||!s)&&(console.log("DOM is ready and editor container found"),!0);if(t())console.log("DOM already ready, initializing editor immediately"),await g();else{console.log("Waiting for DOM to be ready...");let e=0;const n=10,o=()=>{e++,t()?(console.log("DOM is now ready, initializing editor..."),g()):e<n?(console.log(`DOM not ready yet, attempt ${e}/${n}`),setTimeout(o,100*e)):(console.error("Timed out waiting for DOM to be ready"),ze("编辑器加载超时，请刷新页面重试"))};setTimeout(o,100)}const o=(window.addEventListener("export-document",w),()=>window.removeEventListener("export-document",w));return x&&clearInterval(x),n(9,x=setInterval((()=>{if(a)try{const e=a.state.doc.toString();console.log("Auto-saving document..."),he.updateContent(e)}catch(e){console.error("Error during auto-save:",e)}}),3e4)),()=>{if(console.log("Editor component unmounting, cleaning up resources..."),x&&(clearInterval(x),console.log("Auto-save timer cleared")),"function"==typeof o&&o(),a)try{a.destroy(),n(8,a=void 0),console.log("Editor instance destroyed")}catch(e){console.error("Error destroying editor instance:",e)}}}catch(t){console.error("Critical error during editor mounting:",t),ze("编辑器初始化失败，请刷新页面")}})),$=()=>{x&&clearInterval(x),b(),a&&a.destroy(),s?.removeEventListener("scroll",f),l?.removeEventListener("scroll",v)},k().$$.on_destroy.push($),e.$$.update=()=>{4&e.$$.dirty&&console.log(`Editor component: editorReady = ${h}`),267&e.$$.dirty&&a&&o&&(n(0,s.style.fontSize=`${o.fontSize}px`,s),n(0,s.style.lineHeight=o.lineHeight.toString(),s),o.syncScroll?(s.addEventListener("scroll",f),l.addEventListener("scroll",v)):(s.removeEventListener("scroll",f),l.removeEventListener("scroll",v))),776&e.$$.dirty&&o&&(x&&(clearInterval(x),n(9,x=null)),o.autoSave&&n(9,x=setInterval((()=>{if(a){const e=a.state.doc.toString();he.updateContent(e),console.log("Auto-saving document...")}}),1e3*o.autoSaveInterval)))},[s,l,h,o,c,u,function(e){const{action:t,placeholder:n}=e.detail;if(console.log(`Toolbar action received: ${t}, editor ready: ${h}`),!h)return console.warn("编辑器尚未就绪，无法执行操作"),void ze("请等待编辑器完全加载");try{const e=s.querySelector("textarea");if(e){const t=e.selectionStart,o=e.selectionEnd;return console.log(`直接处理 textarea 插入，位置 ${t}-${o}: "${n}"`),e.value=e.value.substring(0,t)+n+e.value.substring(o),e.selectionStart=e.selectionEnd=t+n.length,he.updateContent(e.value),m(e.value),e.focus(),void console.log("文本插入成功")}if(!a)throw new Error("找不到可用的编辑器");try{const{state:e}=a,t=e.selection.main;let o=t.from,r=t.to;console.log(`使用 editorInstance 插入文本，位置 ${o}-${r}: "${n}"`),a.dispatch({changes:{from:o,to:r,insert:n},selection:{anchor:o+n.length}}),a.focus(),console.log("文本插入成功")}catch(o){throw console.error("使用 editorInstance 插入文本失败:",o),o}}catch(r){console.error("工具栏操作处理失败:",r),ze(`无法执行操作: ${r.message}`)}},function(){n(5,u=!0)},a,x,function(e){j[e?"unshift":"push"]((()=>{s=e,n(0,s),n(8,a),n(3,o),n(1,l)}))},function(e){j[e?"unshift":"push"]((()=>{l=e,n(1,l)}))},function(e){u=e,n(5,u)}]}class Oe extends V{constructor(e){super(),W(this,e,De,He,s,{})}}function Ne(e){let t;return{c(){t=u("span"),t.textContent="Saved",f(t,"class","text-accent dark:text-accent-dark")},m(e,n){c(e,t,n)},d(e){e&&d(t)}}}function Ae(t){let n,o,r,s,i,l,h,p,v,w,b,x,k;let y=Ne(t);return{c(){n=u("header"),o=u("div"),r=u("div"),r.innerHTML='<div class="font-bold text-xl text-primary dark:text-primary-dark">MarkTeX</div> <div class="text-sm text-neutral/60 dark:text-neutral-dark/60">Editor</div>',s=g(),i=u("div"),l=u("div"),h=u("span"),h.textContent="Status:",p=g(),y.c(),v=g(),w=u("div"),b=u("button"),b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> <span class="hidden md:inline">Export</span>',f(r,"class","flex items-center gap-3"),f(l,"class","hidden md:flex items-center gap-1 text-sm"),f(i,"class","flex items-center gap-2"),f(b,"class","btn-secondary text-sm flex items-center gap-1"),f(b,"title","Export Markdown"),f(w,"class","flex items-center gap-3"),f(o,"class","container mx-auto px-4 py-3 flex items-center justify-between"),f(n,"class","w-full bg-base-100 dark:bg-base-100-dark shadow-sm border-b border-base-300 dark:border-base-300-dark")},m(e,t){c(e,n,t),a(n,o),a(o,r),a(o,s),a(o,i),a(i,l),a(l,h),a(l,p),y.m(l,null),a(o,v),a(o,w),a(w,b),x||(k=m(b,"click",Pe),x=!0)},p:e,i:e,o:e,d(e){e&&d(n),y.d(),x=!1,k()}}}function Pe(){const e=new CustomEvent("export-document");window.dispatchEvent(e)}class Xe extends V{constructor(e){super(),W(this,e,null,Ae,s,{})}}function Re(t){let n,o,r,s,i,l;return{c(){n=u("footer"),o=u("div"),r=u("div"),s=u("div"),s.textContent=`© ${t[0]} MarkTeX Editor`,i=g(),l=u("div"),l.innerHTML='<div class="flex items-center gap-2"><span>Powered by</span> <a href="https://svelte.dev" target="_blank" rel="noopener" class="hover:text-primary dark:hover:text-primary-dark transition-colors">Svelte</a> <span>•</span> <a href="https://codemirror.net" target="_blank" rel="noopener" class="hover:text-primary dark:hover:text-primary-dark transition-colors">CodeMirror</a> <span>•</span> <a href="https://katex.org" target="_blank" rel="noopener" class="hover:text-primary dark:hover:text-primary-dark transition-colors">KaTeX</a></div>',f(s,"class","text-sm text-neutral/60 dark:text-neutral-dark/60"),f(l,"class","text-xs text-neutral/40 dark:text-neutral-dark/40"),f(r,"class","flex flex-col md:flex-row justify-between items-center gap-2"),f(o,"class","container mx-auto px-4 py-4"),f(n,"class","w-full bg-base-100 dark:bg-base-100-dark shadow-inner border-t border-base-300 dark:border-base-300-dark mt-auto")},m(e,t){c(e,n,t),a(n,o),a(o,r),a(r,s),a(r,i),a(r,l)},p:e,i:e,o:e,d(e){e&&d(n)}}}function Fe(e){return[(new Date).getFullYear()]}class We extends V{constructor(e){super(),W(this,e,Fe,Re,s,{})}}function Ve(e){let t,n;return{c(){t=h("svg"),n=h("path"),f(n,"stroke-linecap","round"),f(n,"stroke-linejoin","round"),f(n,"stroke-width","2"),f(n,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"class","h-6 w-6 text-neutral-dark"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke","currentColor")},m(e,o){c(e,t,o),a(t,n)},d(e){e&&d(t)}}}function qe(e){let t,n;return{c(){t=h("svg"),n=h("path"),f(n,"stroke-linecap","round"),f(n,"stroke-linejoin","round"),f(n,"stroke-width","2"),f(n,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"class","h-6 w-6 text-neutral"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke","currentColor")},m(e,o){c(e,t,o),a(t,n)},d(e){e&&d(t)}}}function Ke(t){let n,o,r,s,i;function l(e,t){return"light"===e[0].theme?qe:Ve}let a=l(t),h=a(t);return{c(){n=u("button"),h.c(),f(n,"class","w-12 h-12 rounded-full bg-base-100 dark:bg-base-100-dark shadow-md flex items-center justify-center hover:shadow-lg transition-all duration-200"),f(n,"title",o="light"===t[0].theme?"Switch to dark mode":"Switch to light mode"),f(n,"aria-label",r="light"===t[0].theme?"Switch to dark mode":"Switch to light mode")},m(e,o){c(e,n,o),h.m(n,null),s||(i=m(n,"click",t[1]),s=!0)},p(e,[t]){a!==(a=l(e))&&(h.d(1),h=a(e),h&&(h.c(),h.m(n,null))),1&t&&o!==(o="light"===e[0].theme?"Switch to dark mode":"Switch to light mode")&&f(n,"title",o),1&t&&r!==(r="light"===e[0].theme?"Switch to dark mode":"Switch to light mode")&&f(n,"aria-label",r)},i:e,o:e,d(e){e&&d(n),h.d(),s=!1,i()}}}function Ue(e,t,n){let o;return i(e,U,(e=>n(0,o=e))),[o,function(){U.toggleTheme()}]}class Je extends V{constructor(e){super(),W(this,e,Ue,Ke,s,{})}}const{document:Ye}=l;function Ge(t){let n;return{c(){n=u("div"),n.innerHTML='<div class="spinner"></div>',f(n,"class","w-full h-[calc(100vh-200px)] flex items-center justify-center")},m(e,t){c(e,n,t)},i:e,o:e,d(e){e&&d(n)}}}function Qe(e){let t,n;return t=new Oe({}),{c(){P(t.$$.fragment)},m(e,o){X(t,e,o),n=!0},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){N(t.$$.fragment,e),n=!1},d(e){R(t,e)}}}function Ze(e){let t,n,r,s,i,l,h,p,m,v,w,b,x,k;s=new Xe({});const y=[Qe,Ge],$=[];function S(e,t){return e[0]?0:1}return h=S(e),p=$[h]=y[h](e),w=new Je({}),x=new We({}),{c(){t=u("meta"),n=g(),r=u("main"),P(s.$$.fragment),i=g(),l=u("div"),p.c(),m=g(),v=u("div"),P(w.$$.fragment),b=g(),P(x.$$.fragment),Ye.title="MarkTeX - Markdown & LaTeX 编辑器",f(t,"name","description"),f(t,"content","MarkTeX是一个强大的Markdown和LaTeX公式编辑器，支持实时预览和多种导出格式。"),f(l,"class","container mx-auto px-4 py-6"),f(v,"class","fixed bottom-6 right-6 z-50"),f(r,"class","min-h-screen w-full bg-base-200 dark:bg-base-200-dark text-neutral dark:text-neutral-dark font-sans transition-colors duration-200")},m(e,o){a(Ye.head,t),c(e,n,o),c(e,r,o),X(s,r,null),a(r,i),a(r,l),$[h].m(l,null),a(r,m),a(r,v),X(w,v,null),a(r,b),X(x,r,null),k=!0},p(e,[t]){let n=h;h=S(e),h!==n&&(D={r:0,c:[],p:D},N($[n],1,1,(()=>{$[n]=null})),D.r||o(D.c),D=D.p,p=$[h],p||(p=$[h]=y[h](e),p.c()),O(p,1),p.m(l,null))},i(e){k||(O(s.$$.fragment,e),O(p),O(w.$$.fragment,e),O(x.$$.fragment,e),k=!0)},o(e){N(s.$$.fragment,e),N(p),N(w.$$.fragment,e),N(x.$$.fragment,e),k=!1},d(e){e&&(d(n),d(r)),d(t),R(s),$[h].d(),R(w),R(x)}}}function et(e,t,n){let o;i(e,U,(e=>n(1,o=e)));let r=!1;function s(){if("undefined"!=typeof window&&void 0!==window.katex)return void n(0,r=!0);const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css",document.head.appendChild(e);const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js",t.async=!0,t.onload=()=>{n(0,r=!0)},document.head.appendChild(t)}return y((()=>{const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;("dark"===e||!e&&t)&&document.documentElement.classList.add("dark"),function(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap",document.head.appendChild(e)}(),s()})),e.$$.update=()=>{2&e.$$.dirty&&("dark"===o.theme?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},[r,o]}console.info('\n===========================================\nMarkTeX 编辑器启动\n===========================================\n如果您无法通过 npm run dev 运行应用，可能是 PowerShell 安全策略问题。\n请尝试以下方法之一：\n\n1. 使用 CMD 而不是 PowerShell 运行命令：\n   cmd /c "npm run dev"\n\n2. 以管理员身份运行 PowerShell 并执行：\n   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser\n   \n3. 双击打开 index.html 文件直接在浏览器中运行\n===========================================\n');const tt=console.error;console.error=function(...e){const t=e[0]?.toString()||"";if(t.includes("Editor instance not initialized")){console.warn("编辑器正在初始化中，请稍候再试...");const e=document.querySelector(".editor-loading-indicator");e&&e instanceof HTMLElement&&(e.style.display="block")}else t.includes("Receiving end does not exist")||t.includes("videoInWhiteList")||t.includes("WebAssembly.instantiate")||tt.apply(console,e)},window.addEventListener("error",(e=>{if(e.message&&e.message.includes("Editor"))return e.preventDefault(),console.warn("编辑器初始化问题：",e.message),void document.querySelector(".editor-error-message");const t=document.createElement("div");t.style.position="fixed",t.style.top="10px",t.style.left="10px",t.style.right="10px",t.style.padding="20px",t.style.backgroundColor="#ffebee",t.style.border="1px solid #ef5350",t.style.borderRadius="4px",t.style.zIndex="9999",t.innerHTML=`\n    <h3 style="margin-top: 0; color: #d32f2f;">应用程序启动错误</h3>\n    <p><strong>错误信息:</strong> ${e.message||"未知错误"}</p>\n    <p><strong>解决方案:</strong></p>\n    <ol>\n      <li>请确保已运行 fix-project.js 脚本: <code>node fix-project.js</code></li>\n      <li>尝试使用 CMD 而不是 PowerShell 运行: <code>cmd /c "npm run dev"</code></li>\n      <li>清除浏览器缓存后重试</li>\n      <li>检查浏览器控制台获取更多详细信息</li>\n    </ol>\n    <button style="padding: 8px 16px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="this.parentNode.remove()">关闭</button>\n  `,document.body.appendChild(t)}));const nt=document.querySelector(".initial-loader");nt&&(nt.classList.add("opacity-0"),nt instanceof HTMLElement&&(nt.style.transition="opacity 0.3s ease-out"),setTimeout((()=>{nt.remove()}),300)),new class extends V{constructor(e){super(),W(this,e,et,Ze,s,{})}}({target:document.getElementById("app")});
